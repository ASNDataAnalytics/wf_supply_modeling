---
title: "Estimates for FTE Probabilities by Age & Sex"
format: html
---

```{r}
#| label: Packages
#| echo: false
#| warning: false

require(asn)
require(tidyverse)
```

## From UNC Sheps Article

<https://data.asn-online.org/posts/neph_wf_trends/>

UNC Sheps estimated probability of clinical FTE by sex and age using data from NC. See this section from their report:

### 2.4 Modeling FTE

The UNC model forecasts both the headcount and FTE of the nephrology workforce. The AMA Masterfile does not contain hours worked so we used licensure data from the North Carolina Health Professions Data System (HPDS) to estimate nephrology FTEs. Using these data, 1 FTE in nephrology is equivalent to 70 patient care hours per week. The HPDS data also show that the FTE of individual physicians varies depending on age and gender. To model individual physician FTEs, the UNC model makes the simplifying approach of grouping physicians into three categories:

-   Those working full time, i.e. FTE = 1

-   Those working part time, i.e. FTE = 0.5

-   Those not providing any patient care, i.e. FTE = 0

The UNC model assigns a FTE to a given physician depending on the probabilities of providing patient care full time, part time or not at all depending on the age and gender of the physician. These probabilities are illustrated in Figure 9.

#### Figure 9. UNC Model: Probability of Providing Full-Time Patient Care by Sex and Age

![](prob_fte.png)

The chart shows for males, the probability of working part time increases with age – indicated by the widening of the orange band. However, for female physicians the probability of not providing any patient care increases from age 50 through to 80 – indicated by the increasing grey region. It is important to note that the FTE calculations for females over 50 is based on a small number of physicians and therefore may not be a good predictor of the behavior of future older female nephrologists.

## Extracting Data

I used Plot Digitizer (<https://plotdigitizer.com/app>) to extract the probability curves.

This extracted the following probabilities.

### 1. Male—*P*(PCFTE=1)

```{r}

men_fulltime <- 
  tibble::tribble(
  ~x,                 ~y,                
  30.15725518227305,  0.6380434782608696,
  30.90421729807005,  0.6358695652173914,
  31.847748391708365, 0.6282608695652174,
  32.673338098641885, 0.6239130434782609,
  33.42030021443888,  0.6195652173913043,
  34.32451751250893,  0.6152173913043478,
  35.07147962830593,  0.6119565217391304,
  35.97569692637598,  0.6054347826086957,
  37.07648320228735,  0.6021739130434782,
  38.413152251608295, 0.5967391304347827,
  39.00285918513224,  0.5956521739130435,
  40.30021443888492,  0.591304348,       
  41.479628305932806, 0.5869565217391305,
  42.54110078627591,  0.5858695652173913,
  43.406004288777694, 0.5847826086956521,
  44.074338813438175, 0.5836956521739131,
  44.93924231593996,  0.5826086956521739,
  45.76483202287348,  0.5804347826086956,
  46.35453895639743,  0.5815217391304348,
  47.29807005003574,  0.5815217391304348,
  48.280914939242315, 0.5793478260869566,
  48.98856325947105,  0.5793478260869566,
  50.285918513223734, 0.5815217391304348,
  49.61758398856326,  0.5804347826086956,
  51.42601858470336,  0.5847826086956521,
  52.05503931379557,  0.5836956521739131,
  52.802001429592565, 0.5847826086956521,
  53.62759113652609,  0.5869565217391305,
  54.531808434596144, 0.5880434782608696,
  55.75053609721229,  0.592391304,       
  55.082201572551824, 0.592391304,       
  56.536812008577556, 0.5956521739130435,
  57.36240171551108,  0.5967391304347827,
  58.58112937812723,  0.6010869565217392,
  59.367405289492496, 0.6065217391304348,
  60.468191565403856, 0.6108695652173913,
  61.76554681915654,  0.6195652173913043,
  62.55182273,        0.6260869565217392,
  63.96711937097927,  0.6315217391304347,
  65.30378842030021,  0.6434782608695653,
  66.60114367,        0.6478260869565218,
  67.74124374553253,  0.6554347826086957,
  68.52751966,        0.6663043478260869,
  70.21801287,        0.6739130434782609,
  71.43674052894926,  0.683695652,       
  72.93066476054324,  0.6967391304347826,
  74.18870621872767,  0.7097826086956521,
  75.52537527,        0.7195652173913043,
  76.78341672623303,  0.7336956521739131,
  77.84488920657613,  0.7456521739130435,
  78.63116511794138,  0.7565217391304347,
  80.00714796,        0.7684782608695653,
  80.59685489635454,  0.775,             
  82.13009292,        0.7923913043478261,
  83.23087919942816,  0.8108695652173913,
  84.41029306647606,  0.8217391304347826,
  85.03931379556826,  0.8315217391304348
  ) |> 
  mutate(
    y = 1 - y
  ) |> 
  rename(
    age = x, 
    p_fte = y
  )

```

### 2. Male—*P*(PCFTE=0)

```{r}
men_no_fte <-
  tibble::tribble(
    ~x,                 ~y,                  
    30.196568977841316, 0.13478260869565217, 
    30.982844889206575, 0.1391304347826087,  
    31.92637598284489,  0.1423913043478261,  
    32.90922087205146,  0.1423913043478261,  
    34.12794853466762,  0.14673913043478262, 
    35.07147962830593,  0.15,                
    35.93638313080772,  0.15,                
    37.273052180128666, 0.15543478260869564, 
    36.72265904217298,  0.15217391304347827, 
    38.25589706933524,  0.1565217391304348,  
    39.08148677626876,  0.1565217391304348,  
    40.025017869907074, 0.15760869565217392, 
    41.04717655468192,  0.15869565217391304, 
    42.030021443888494, 0.15978260869565217, 
    42.81629735525375,  0.16086956521739132, 
    43.68120085775554,  0.16195652173913044, 
    44.821300929235164, 0.16195652173913044, 
    45.489635453895644, 0.16195652173913044, 
    46.47248034310222,  0.16630434782608697, 
    47.455325232308795, 0.1641304347826087,  
    48.71336669049321,  0.16521739130434782, 
    50.08934953538242,  0.1641304347826087,  
    51.26876340243031,  0.16195652173913044, 
    52.251608291636884, 0.16304347826086957, 
    53.50964974982131,  0.16086956521739132, 
    55.00357398,        0.15869565217391304, 
    56.37955682630451,  0.15760869565217392, 
    57.48034310221587,  0.1565217391304348,  
    58.58112937812723,  0.15434782608695652, 
    59.52466047176554,  0.15217391304347827, 
    60.54681915654039,  0.15,                
    61.41172265904217,  0.14891304347826087, 
    62.473195139385275, 0.14565217391304347, 
    63.69192280200143,  0.1423913043478261,  
    64.51751250893496,  0.1391304347826087,  
    65.53967119,        0.1358695652173913,  
    66.52251608291637,  0.13152173913043477, 
    67.34810579,        0.12717391304347828, 
    68.33095067905647,  0.12608695652173912, 
    69.19585418155826,  0.12282608695652174, 
    69.90350250178699,  0.12065217391304348, 
    70.88634739099356,  0.11630434782608695, 
    71.79056468906361,  0.10978260869565218, 
    72.45889921,        0.10869565217391304, 
    73.20586132952108,  0.10326086956521739, 
    73.87419585418155,  0.1,                 
    74.66047176554682,  0.09673913,          
    75.40743388134382,  0.095652174,         
    76.03645461043602,  0.092391304,         
    76.78341672623303,  0.090217391,         
    77.60900643316654,  0.085869565,         
    78.35596854896355,  0.080434783,         
    78.98498927805576,  0.076086957,         
    79.61401000714797,  0.07173913,          
    80.36097212294496,  0.068478261,         
    81.18656182987849,  0.061956522,         
    81.97283774124375,  0.057608695652173914,
    82.83774124374554,  0.051086956521739134,
    83.82058613295212,  0.044565217,         
    84.60686204431738,  0.038043478,         
    85.07862759113652,  0.031521739
  ) |> 
  rename(
    age = x, 
    p_fte = y
  )
```


```{r}

ggplot(
  men_no_fte,
  aes(
    x = age, 
    y = p_fte
  )
) +
  geom_area()
```